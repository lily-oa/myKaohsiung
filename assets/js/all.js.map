{"version":3,"sources":["all.js"],"names":["url","select","document","querySelector","tabsList","subtitle","cardList","pageList","data","page","getData","axios","get","then","response","result","records","console","log","renderData","showData","selectGroup","map","item","Zone","newSelect","filter","index","indexOf","selectStr","forEach","list","innerHTML","textContent","pagination","updateData","str","content","picture1","Picdescribe1","Name","Opentime","Add","Tel","Ticketinfo","nowPage","dataTotal","length","showPerPage","pageTotal","Math","ceil","currentPage","minData","maxData","currentPageData","num","push","hasPage","currenPage","hasNext","pageBtn"],"mappings":"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","file":"all.js","sourcesContent":["const url = 'https://raw.githubusercontent.com/hexschool/KCGTravel/master/datastore_search.json'; //高旅網  api\nconst select = document.querySelector('.select-group'); //行政區\nconst tabsList = document.querySelector('.tabs-list'); //熱門區\nconst subtitle = document.querySelector('.subtitle'); //卡片標題\nconst cardList = document.querySelector('.card-list'); //卡片  ul\nconst pageList = document.querySelector('.pagination-list'); // 分頁\n\nlet data = [];\nlet page = {};\n\n// axios get data\nfunction getData(){\n  axios.get(url)\n  .then(function(response){\n    data = response.data.result.records;\n    console.log(data);\n    renderData(data);\n  });\n}\ngetData();\n\n\n// 渲染 select filter  初始化\nfunction renderData(showData) {\n  // 渲染有存在的行政區到選單欄位\n  let selectGroup = showData.map((item) => {\n    return item.Zone;\n  });\n  \n  let newSelect = selectGroup.filter((item, index) => {\n    return selectGroup.indexOf(item) == index;\n  });\n\n  let selectStr = `<option value=\"高雄全區\" selected\">-- 高雄全區 --</option>`;\n  newSelect.forEach(function (item) {\n    let list = `<option value=\"${item}\">${item}</option>`;\n    selectStr += list;\n  });\n  select.innerHTML = selectStr;\n  subtitle.textContent = '高雄全區';\n  \n  pagination(showData, 1);\n}\n\n// 渲染所有清單資料到畫面上\nfunction updateData(showData){\n  let str = '';\n  showData.forEach(function(item){\n    let content = `li class=\"card\">\n      <div class=\"card-header\" style=\"background-image:url(${item.picture1})\" title=\"${item.Picdescribe1}\">\n        <div class=\"card-title\">\n          <h4>${item.Name}</h4>\n          <p>${item.Zone}</p>\n        </div>\n      </div>\n      <ul class=\"card-body\">\n        <li>\n          <i class=\"fas fa-clock\"></i>\n          <p>${item.Opentime}</p>\n        </li>\n        <li>\n          <i class=\"fas fa-map-marker-alt\"></i>\n          <p>${item.Add}</p>\n        </li>\n        <li class=\"card-footer-list d-flex flex-lg-column justify-content-lg-start align-items-lg-start\">\n          <div class=\"card-footer-item\" data-charge=\"free\">\n            <i class=\"fas fa-mobile-alt\"></i>\n            <p>${item.Tel}</p>\n          </div>\n          <div class=\"card-footer-item\" data-display=${item.Ticketinfo == '免費參觀' ? \"\" : \"d-none\"}>\n            <i class=\"fas fa-tag\"></i>\n            <p>${item.Ticketinfo}</p>\n          </div>\n        </li>\n      </ul>\n    </li>`;\n    str += content;\n  });\n  cardList.innerHTML = str;\n}\n\n// 監聽select change event\n// select.addEventListener('change', switchDataSelect, false);\n// function switchDataSelect(e){\n//   if(e.target.value == ''){\n//     return;\n//   }\n\n//   let chosenDistrict = e.target.value;\n//   dataFilter(chosenDistrict);\n\n//   // 切換分頁\n//   if(e.target.dataset.type === 'tab' || e.target.dataset.type === 'num'){\n//     const page = e.target.dataset.page;\n//     dataFilter(chosenDistrict);\n//     pagination(dataFilter(chosenDistrict), page);\n//   }\n//   return false;\n// }\n\n// 輸入showData 資料，用來計算 page 數量資料\nfunction pagination(data, nowPage){\n  const dataTotal = data.length;\n  const showPerPage = 6;\n  // 可能會有餘數 -> 無條件進位\n  const pageTotal = Math.ceil(dataTotal / showPerPage);\n  let currentPage = nowPage;\n\n  // 當 \"當前頁數\" 比 \"總頁數\" 大的時候，\"當前頁數\" 就等於 \"總頁數\"\n  if(currentPage > pageTotal){\n  currentPage = pageTotal;\n  }\n\n  // 最小值公式 -> 當前可顯示的最少資料量\n  const minData = (currentPage * showPerPage) - showPerPage + 1;\n\n  // 最大值公式 -> 當前可顯示的最資料量\n  const maxData = (currentPage * showPerPage);\n\n  let currentPageData = [];\n  //處理資料\n  data.forEach((item, index) => {\n  //獲取陣列索引，但因為索引是從 0 開始所以要 +1\n  const num = index + 1;\n  \n  if(num >= minData && num <= maxData){\n    currentPageData.push(item);  //用來篩選的陣列\n    };\n  });\n\n  // 物件中的資料都是字串\n  page = {\n    dataTotal, \n    pageTotal, \n    currentPage,\n    hasPage: currenPage > 1, //boolean\n    hasNext: currentPage < dataTotal,\n  };\n\n  updateData(currentPageData);\n  pageBtn(page, nowPage);\n\n}"]}